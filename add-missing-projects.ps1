# Fix Build Errors - Add Missing Projects to Solution
# WMS.Application and WMS.Infrastructure exist but aren't in the solution

Write-Host "????????????????????????????????????????????????????????" -ForegroundColor Cyan
Write-Host "?   Adding Missing Projects to Solution               ?" -ForegroundColor Cyan
Write-Host "????????????????????????????????????????????????????????" -ForegroundColor Cyan
Write-Host ""

# Find solution file
$solutionFile = Get-ChildItem -Filter "*.sln" | Select-Object -First 1

if (-not $solutionFile) {
    Write-Host "? No solution file found!" -ForegroundColor Red
    exit 1
}

Write-Host "Solution: $($solutionFile.Name)" -ForegroundColor Yellow
Write-Host ""

# Projects to add
$projectsToAdd = @(
    "WMS.Application\WMS.Application.csproj",
    "WMS.Infrastructure\WMS.Infrastructure.csproj"
)

foreach ($project in $projectsToAdd) {
    if (Test-Path $project) {
        Write-Host "Adding $project..." -ForegroundColor Cyan
        
        try {
            dotnet sln $solutionFile.FullName add $project
            Write-Host "? Added $project" -ForegroundColor Green
        }
        catch {
            Write-Host "? Failed to add $project" -ForegroundColor Red
            Write-Host "  Error: $($_.Exception.Message)" -ForegroundColor Red
        }
    }
    else {
        Write-Host "? $project not found - skipped" -ForegroundColor Yellow
    }
    
    Write-Host ""
}

Write-Host "????????????????????????????????????????????????????????" -ForegroundColor Green
Write-Host "?   Complete!                                         ?" -ForegroundColor Green
Write-Host "????????????????????????????????????????????????????????" -ForegroundColor Green
Write-Host ""
Write-Host "Next steps:" -ForegroundColor Yellow
Write-Host "  1. dotnet clean" -ForegroundColor White
Write-Host "  2. dotnet build" -ForegroundColor White
Write-Host ""
